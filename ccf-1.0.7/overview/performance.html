<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Threading" href="threading.html" /><link rel="prev" title="Cryptography" href="cryptography.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><meta name="generator" content="sphinx-4.1.2, furo 2021.08.11.beta42"/>
        <title>Performance - CCF documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=197f00461d56902ea7ca048ec6e6ba026f62c97b" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=93475b62d1c3bc01323a0eefdc14a62d77b12690" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style>
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css"></head>
  <body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">CCF  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/ccf.svg" alt="Logo"/>
  </div>
  
</a>

<script>
  function onVersionChange() {
    window.location.href = document.getElementById("versions").value;
  }

  window.addEventListener("DOMContentLoaded",function(){
      let selectedVersion = "main"
      const thisURL = window.location.toString()
      let indexOfVersion = thisURL.indexOf("ccf-")
      if (indexOfVersion != -1) {
          selectedVersion = thisURL.substring(indexOfVersion, thisURL.indexOf("/", indexOfVersion));
      }
      let sel = document.getElementById("versions");
      if (sel != null) {
          let opts = sel.options;
          for (var opt, j = 0; opt = opts[j]; j++) {
              if (opt.text == selectedVersion) {
                  sel.selectedIndex = j;
                  break;
              }
          }
      }
  }, false);
</script>


<select name="versions" id="versions" class="custom-select custom-select-sm" style="margin: 0em 1em;" onchange="onVersionChange()">
    <option value="../../main/overview/performance.html">main </option>
    <option value="../../ccf-2.0.0-dev3/overview/performance.html">ccf-2.0.0-dev3 </option>
    <option value="../../ccf-2.0.0-dev2/overview/performance.html">ccf-2.0.0-dev2 </option>
    <option value="../../ccf-2.0.0-dev1/overview/performance.html">ccf-2.0.0-dev1 </option>
    <option value="../../ccf-2.0.0-dev0/overview/performance.html">ccf-2.0.0-dev0 </option>
    <option value="../../ccf-1.0.8/overview/performance.html">ccf-1.0.8 </option>
    <option value="performance.html">ccf-1.0.7 </option>
    <option value="../../ccf-1.0.6/overview/performance.html">ccf-1.0.6 </option>
    <option value="../../ccf-1.0.5/overview/performance.html">ccf-1.0.5 </option>
    <option value="../../ccf-1.0.4/overview/performance.html">ccf-1.0.4 </option>
    <option value="../../ccf-1.0.3/overview/performance.html">ccf-1.0.3 </option>
    <option value="../../ccf-1.0.2/overview/performance.html">ccf-1.0.2 </option>
    <option value="../../ccf-1.0.1/overview/performance.html">ccf-1.0.1 </option>
    <option value="../../ccf-1.0.0/overview/performance.html">ccf-1.0.0 </option>
</select>
<form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Overview</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_policy.html">CCF release and support policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="governance.html">Governance</a></li>
<li class="toctree-l2"><a class="reference internal" href="consensus.html">Consensus Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="cryptography.html">Cryptography</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="threading.html">Threading</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../build_apps/index.html">Build Apps</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/create_vm.html">Create Azure SGX VM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/install_bin.html">Install CCF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/build_setup.html">CCF Development Setup</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../build_apps/example.html">C++ Application</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/logging_cpp.html">Logging (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/logging_rpc_api.html">Logging RPC API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/logging.html">Logging</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../build_apps/js_app.html">JavaScript Application</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/js_app_ts.html">TypeScript Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/js_app_tsoa.html">TypeScript Application using tsoa</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../build_apps/js_app_bundle.html">JavaScript Application Bundle</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../build_apps/js_app_ts.html">TypeScript Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build_apps/js_app_tsoa.html">TypeScript Application using tsoa</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/build_app.html">Build and Sign CCF Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/run_app.html">Running CCF Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/demo.html">End-to-end demo</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../build_apps/auth/index.html">User Authentication</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/auth/jwt.html">JWT Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/auth/cert.html">Certificate Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/auth/jwt_ms_example.html">JWT Authentication example using Microsoft Identity Platform</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../build_apps/kv/index.html">Key-Value Store</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/kv/kv_how_to.html">Key-Value Store How-To</a></li>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/kv/kv_serialisation.html">Key-Value Serialisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../build_apps/kv/api.html">Key-Value Store API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/upgrading_app.html">Upgrade Your Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/api.html">Developer API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/crypto.html">Cryptography API</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../use_apps/index.html">Use Apps</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../use_apps/issue_commands.html">Issuing Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../use_apps/verify_tx.html">Verifying Transaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../use_apps/verify_quote.html">Verifying Quote</a></li>
<li class="toctree-l2"><a class="reference internal" href="../use_apps/python_tutorial.html">Python Client Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../use_apps/python_api.html">Python Client API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../use_apps/rpc_api.html">RPC API</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../operations/index.html">Operations</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../operations/run_setup.html">Setup CCF Runtime Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operations/start_network.html">Running a CCF Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operations/ledger_snapshot.html">Ledger and Snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operations/recovery.html">Disaster Recovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operations/node_output.html">Node Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operations/resource_usage.html">Resource Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operations/operator_rpc_api.html">Operator RPC API</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../governance/index.html">Governance</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../governance/proposals.html">Proposing and Voting for a Proposal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../governance/open_network.html">Opening a Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../governance/accept_recovery.html">Accepting Recovery and Submitting Shares</a></li>
<li class="toctree-l2"><a class="reference internal" href="../governance/common_member_operations.html">Common Governance Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../governance/adding_member.html">Adding New Members</a></li>
<li class="toctree-l2"><a class="reference internal" href="../governance/hsm_keys.html">Using Member Keys Stored in HSM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../governance/member_rpc_api.html">Member RPC API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../governance/js_gov.html">JavaScript Governance</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../audit/index.html">Audit</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../audit/builtin_maps.html">Built-in Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audit/merkle_tree.html">Merkle Tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audit/ledger.html">Ledger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audit/python_library.html">Python Library</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../contribute/index.html">Contribute</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/create_vm.html">Create Azure SGX VM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_apps/build_setup.html">CCF Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/build_ccf.html">Build CCF from Source</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <article role="main">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <section id="performance">
<h1>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>CCF pairs strong confidentiality guarantees with <a class="reference external" href="https://github.com/microsoft/CCF/blob/main/CCF-TECHNICAL-REPORT.pdf">very high performance</a>. CCF can sustain high transaction throughput, while also reaching consensus over global commits with low latency.</p>
<p>There are several performance metrics in the CI test suite to ensure this, ranging from micro-benchmarks of critical systems to end-to-end tests measuring peak throughput. These are run against every PR and commit to the main branch. You can also run these locally to test the configuration of your machines, and use them as a basis for creating performance tests of your own CCF application.</p>
</section>
<section id="micro-benchmarks">
<h2>Micro-benchmarks<a class="headerlink" href="#micro-benchmarks" title="Permalink to this headline">¶</a></h2>
<p>The micro-benchmark tests can be run from the CCF build directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./tests.sh -VV -L <span class="s2">"bench"</span>
</pre></div>
</div>
<p>These test performance-critical features of CCF such as certificate verification and KV-alterations. As an example, here is sample output of <code class="docutils literal notranslate"><span class="pre">crypto_bench</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> sign secp384r1:
 <span class="o">===============================================================================</span>
   Name <span class="o">(</span>baseline is *<span class="o">)</span>   <span class="p">|</span>   Dim   <span class="p">|</span>  Total ms <span class="p">|</span>  ns/op  <span class="p">|</span>Baseline<span class="p">|</span> Ops/second
 <span class="o">===============================================================================</span>
    sign_384_mbed_1byte * <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>    <span class="m">13</span>.353 <span class="p">|</span> <span class="m">1335306</span> <span class="p">|</span>      - <span class="p">|</span>      <span class="m">748</span>.9
      sign_384_ossl_1byte <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">6</span>.877 <span class="p">|</span>  <span class="m">687683</span> <span class="p">|</span>  <span class="m">0</span>.515 <span class="p">|</span>     <span class="m">1454</span>.2
         sign_384_mbed_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>    <span class="m">13</span>.351 <span class="p">|</span> <span class="m">1335096</span> <span class="p">|</span>  <span class="m">1</span>.000 <span class="p">|</span>      <span class="m">749</span>.0
         sign_384_ossl_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">7</span>.045 <span class="p">|</span>  <span class="m">704453</span> <span class="p">|</span>  <span class="m">0</span>.528 <span class="p">|</span>     <span class="m">1419</span>.5
       sign_384_mbed_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>    <span class="m">15</span>.656 <span class="p">|</span> <span class="m">1565637</span> <span class="p">|</span>  <span class="m">1</span>.172 <span class="p">|</span>      <span class="m">638</span>.7
       sign_384_ossl_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">8</span>.101 <span class="p">|</span>  <span class="m">810073</span> <span class="p">|</span>  <span class="m">0</span>.607 <span class="p">|</span>     <span class="m">1234</span>.5
 <span class="o">===============================================================================</span>
 sign secp256r1:
 <span class="o">===============================================================================</span>
   Name <span class="o">(</span>baseline is *<span class="o">)</span>   <span class="p">|</span>   Dim   <span class="p">|</span>  Total ms <span class="p">|</span>  ns/op  <span class="p">|</span>Baseline<span class="p">|</span> Ops/second
 <span class="o">===============================================================================</span>
  sign_256r1_mbed_1byte * <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">8</span>.861 <span class="p">|</span>  <span class="m">886134</span> <span class="p">|</span>      - <span class="p">|</span>     <span class="m">1128</span>.5
    sign_256r1_ossl_1byte <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.183 <span class="p">|</span>   <span class="m">18280</span> <span class="p">|</span>  <span class="m">0</span>.021 <span class="p">|</span>    <span class="m">54704</span>.3
       sign_256r1_mbed_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">8</span>.916 <span class="p">|</span>  <span class="m">891604</span> <span class="p">|</span>  <span class="m">1</span>.006 <span class="p">|</span>     <span class="m">1121</span>.6
       sign_256r1_ossl_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.199 <span class="p">|</span>   <span class="m">19870</span> <span class="p">|</span>  <span class="m">0</span>.022 <span class="p">|</span>    <span class="m">50326</span>.9
     sign_256r1_mbed_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>    <span class="m">11</span>.952 <span class="p">|</span> <span class="m">1195225</span> <span class="p">|</span>  <span class="m">1</span>.349 <span class="p">|</span>      <span class="m">836</span>.7
     sign_256r1_ossl_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">1</span>.786 <span class="p">|</span>  <span class="m">178600</span> <span class="p">|</span>  <span class="m">0</span>.202 <span class="p">|</span>     <span class="m">5599</span>.1
 <span class="o">===============================================================================</span>
 verify secp384r1:
 <span class="o">===============================================================================</span>
   Name <span class="o">(</span>baseline is *<span class="o">)</span>   <span class="p">|</span>   Dim   <span class="p">|</span>  Total ms <span class="p">|</span>  ns/op  <span class="p">|</span>Baseline<span class="p">|</span> Ops/second
 <span class="o">===============================================================================</span>
  verify_384_mbed_1byte * <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>    <span class="m">25</span>.739 <span class="p">|</span> <span class="m">2573852</span> <span class="p">|</span>      - <span class="p">|</span>      <span class="m">388</span>.5
    verify_384_ossl_1byte <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">5</span>.179 <span class="p">|</span>  <span class="m">517872</span> <span class="p">|</span>  <span class="m">0</span>.201 <span class="p">|</span>     <span class="m">1931</span>.0
       verify_384_mbed_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>    <span class="m">25</span>.878 <span class="p">|</span> <span class="m">2587842</span> <span class="p">|</span>  <span class="m">1</span>.005 <span class="p">|</span>      <span class="m">386</span>.4
       verify_384_ossl_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">5</span>.170 <span class="p">|</span>  <span class="m">516972</span> <span class="p">|</span>  <span class="m">0</span>.201 <span class="p">|</span>     <span class="m">1934</span>.3
     verify_384_mbed_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>    <span class="m">28</span>.007 <span class="p">|</span> <span class="m">2800703</span> <span class="p">|</span>  <span class="m">1</span>.088 <span class="p">|</span>      <span class="m">357</span>.1
     verify_384_ossl_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">6</span>.208 <span class="p">|</span>  <span class="m">620803</span> <span class="p">|</span>  <span class="m">0</span>.241 <span class="p">|</span>     <span class="m">1610</span>.8
 <span class="o">===============================================================================</span>
 verify secp256r1:
 <span class="o">===============================================================================</span>
   Name <span class="o">(</span>baseline is *<span class="o">)</span>   <span class="p">|</span>   Dim   <span class="p">|</span>  Total ms <span class="p">|</span>  ns/op  <span class="p">|</span>Baseline<span class="p">|</span> Ops/second
 <span class="o">===============================================================================</span>
verify_256r1_mbed_1byte * <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>    <span class="m">17</span>.673 <span class="p">|</span> <span class="m">1767258</span> <span class="p">|</span>      - <span class="p">|</span>      <span class="m">565</span>.8
  verify_256r1_ossl_1byte <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.482 <span class="p">|</span>   <span class="m">48160</span> <span class="p">|</span>  <span class="m">0</span>.027 <span class="p">|</span>    <span class="m">20764</span>.0
     verify_256r1_mbed_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>    <span class="m">17</span>.568 <span class="p">|</span> <span class="m">1756758</span> <span class="p">|</span>  <span class="m">0</span>.994 <span class="p">|</span>      <span class="m">569</span>.2
     verify_256r1_ossl_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.498 <span class="p">|</span>   <span class="m">49820</span> <span class="p">|</span>  <span class="m">0</span>.028 <span class="p">|</span>    <span class="m">20072</span>.1
   verify_256r1_mbed_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>    <span class="m">20</span>.771 <span class="p">|</span> <span class="m">2077120</span> <span class="p">|</span>  <span class="m">1</span>.175 <span class="p">|</span>      <span class="m">481</span>.4
   verify_256r1_ossl_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">2</span>.085 <span class="p">|</span>  <span class="m">208471</span> <span class="p">|</span>  <span class="m">0</span>.118 <span class="p">|</span>     <span class="m">4796</span>.8
 <span class="o">===============================================================================</span>
 hash:
 <span class="o">===============================================================================</span>
   Name <span class="o">(</span>baseline is *<span class="o">)</span>   <span class="p">|</span>   Dim   <span class="p">|</span>  Total ms <span class="p">|</span>  ns/op  <span class="p">|</span>Baseline<span class="p">|</span> Ops/second
 <span class="o">===============================================================================</span>
     sha_384_mbed_1byte * <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.003 <span class="p">|</span>     <span class="m">340</span> <span class="p">|</span>      - <span class="p">|</span>  <span class="m">2941176</span>.5
       sha_256_mbed_1byte <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.003 <span class="p">|</span>     <span class="m">290</span> <span class="p">|</span>  <span class="m">0</span>.853 <span class="p">|</span>  <span class="m">3448275</span>.9
       sha_512_mbed_1byte <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.004 <span class="p">|</span>     <span class="m">350</span> <span class="p">|</span>  <span class="m">1</span>.029 <span class="p">|</span>  <span class="m">2857142</span>.9
       sha_384_ossl_1byte <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.004 <span class="p">|</span>     <span class="m">360</span> <span class="p">|</span>  <span class="m">1</span>.059 <span class="p">|</span>  <span class="m">2777777</span>.8
       sha_256_ossl_1byte <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.003 <span class="p">|</span>     <span class="m">290</span> <span class="p">|</span>  <span class="m">0</span>.853 <span class="p">|</span>  <span class="m">3448275</span>.9
       sha_512_ossl_1byte <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.004 <span class="p">|</span>     <span class="m">390</span> <span class="p">|</span>  <span class="m">1</span>.147 <span class="p">|</span>  <span class="m">2564102</span>.6
          sha_384_mbed_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.024 <span class="p">|</span>    <span class="m">2400</span> <span class="p">|</span>  <span class="m">7</span>.059 <span class="p">|</span>   <span class="m">416649</span>.3
          sha_256_mbed_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.035 <span class="p">|</span>    <span class="m">3460</span> <span class="p">|</span> <span class="m">10</span>.176 <span class="p">|</span>   <span class="m">289017</span>.3
          sha_512_mbed_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.024 <span class="p">|</span>    <span class="m">2440</span> <span class="p">|</span>  <span class="m">7</span>.176 <span class="p">|</span>   <span class="m">409836</span>.1
          sha_384_ossl_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.015 <span class="p">|</span>    <span class="m">1460</span> <span class="p">|</span>  <span class="m">4</span>.294 <span class="p">|</span>   <span class="m">684931</span>.5
          sha_256_ossl_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.018 <span class="p">|</span>    <span class="m">1850</span> <span class="p">|</span>  <span class="m">5</span>.441 <span class="p">|</span>   <span class="m">540540</span>.5
          sha_512_ossl_1k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">0</span>.015 <span class="p">|</span>    <span class="m">1530</span> <span class="p">|</span>  <span class="m">4</span>.500 <span class="p">|</span>   <span class="m">653594</span>.8
        sha_384_mbed_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">2</span>.039 <span class="p">|</span>  <span class="m">203891</span> <span class="p">|</span><span class="m">599</span>.679 <span class="p">|</span>     <span class="m">4904</span>.6
        sha_256_mbed_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">3</span>.053 <span class="p">|</span>  <span class="m">305291</span> <span class="p">|</span><span class="m">897</span>.916 <span class="p">|</span>     <span class="m">3275</span>.6
        sha_512_mbed_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">2</span>.039 <span class="p">|</span>  <span class="m">203901</span> <span class="p">|</span><span class="m">599</span>.709 <span class="p">|</span>     <span class="m">4904</span>.3
        sha_384_ossl_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">1</span>.061 <span class="p">|</span>  <span class="m">106090</span> <span class="p">|</span><span class="m">312</span>.031 <span class="p">|</span>     <span class="m">9425</span>.9
        sha_256_ossl_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">1</span>.592 <span class="p">|</span>  <span class="m">159150</span> <span class="p">|</span><span class="m">468</span>.091 <span class="p">|</span>     <span class="m">6283</span>.3
        sha_512_ossl_100k <span class="p">|</span>      <span class="m">10</span> <span class="p">|</span>     <span class="m">1</span>.064 <span class="p">|</span>  <span class="m">106380</span> <span class="p">|</span><span class="m">312</span>.884 <span class="p">|</span>     <span class="m">9400</span>.2
 <span class="o">===============================================================================</span>
</pre></div>
</div>
</section>
<section id="end-to-end-performance-tests">
<h2>End-to-end performance tests<a class="headerlink" href="#end-to-end-performance-tests" title="Permalink to this headline">¶</a></h2>
<p>The end-to-end service performance tests can also be from the CCF build directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./tests.sh -VV -L <span class="s2">"perf"</span>
</pre></div>
</div>
<p>Each of these tests creates a temporary CCF service on the local machine, then sends a high volume of transactions to measure peak and average throughput. The python test wrappers will print summary statistics including a transaction rate histogram when the test completes. These statistics can be retrieved from any CCF service via the <code class="docutils literal notranslate"><span class="pre">getMetrics</span></code> RPC.</p>
<p>For a finer grained view of performance the clients in these tests can also dump the precise times each transaction was sent and its response received, for later analysis. The <code class="docutils literal notranslate"><span class="pre">samples</span></code> folder contains a <code class="docutils literal notranslate"><span class="pre">plot_tx_times</span></code> Python script which produces plots from this data:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
python ../samples/scripts/plot_tx_times.py --save-to perf_plot.png single client_0_test_sent.csv client_0_test_recv.csv
</pre></div>
</div>
<p>The following plot was produced by this script, showing 1,000 transactions sent to the <a class="reference external" href="https://github.com/microsoft/CCF/tree/main/samples/apps/smallbank">SmallBank</a> sample application:</p>
<img alt="../_images/1k_unsigned.png" src="../_images/1k_unsigned.png"/>
<p>This displays several things:</p>
<blockquote>
<div><ul>
<li><p>The latency of each request (on the left y-axis), ie the delay between a request being sent and the corresponding response received, distinguishing</p>
<blockquote>
<div><ul class="simple">
<li><p>the business transactions sent to SmallBank application (green dots)</p></li>
<li><p>the generic <code class="docutils literal notranslate"><span class="pre">commit</span></code> requests used to poll for global commit synchronisation (red dots)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The progress of the CCF commit version (on the right axis), showing both</p>
<blockquote>
<div><ul class="simple">
<li><p>the receiving node’s locally committed version (blue line)</p></li>
<li><p>the highest version agreed by the global consensus across the service (orange line)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>This shows a healthy service. Response latencies are stable, the local version increases steadily, and the global commit correctly catches up shortly afterwards. Note that the node’s local version increments with each processed write transaction but the global commit only changes after longer intervals, increasing in larger steps. The additional delay is from the roundtrip communications required by the consensus protocol, while the step-size is due to the consensus working over <cite>batches</cite> of transactions rather than executing for each transaction individually - in this case the service has batched the first 500 transactions, incrementing the global version to 500.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an idealised test; the client is sending one transaction at a time to measure minimum latency, the transaction logic is simple, the client is communicating with a local node. This is used to establish an <cite>upper limit</cite> on possible performance.</p>
</div>
<p>This can give a direct A/B comparison of various changes. For example, if each request is signed from the client:</p>
<img alt="../_images/1k_signed.png" src="../_images/1k_signed.png"/>
<p>Since CCF verifies the signature on every transaction, the per-request time has increased by approximately 3X (verification is very expensive relative to the simple business logic in SmallBank).</p>
<p>These plots can also be used over longer tests to gauge outlier severity and frequency, and ensure global commit never lags significantly behind local commit. If the number of requests is increased to 200,000:</p>
<img alt="../_images/200k_unsigned.png" src="../_images/200k_unsigned.png"/>
<img alt="../_images/200k_signed.png" src="../_images/200k_signed.png"/>
</section>
</section>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="threading.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Threading</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="cryptography.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Cryptography</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2018, Microsoft Research
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/overview/performance.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Performance</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#micro-benchmarks">Micro-benchmarks</a></li>
<li><a class="reference internal" href="#end-to-end-performance-tests">End-to-end performance tests</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/main.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});

// Remove height from all mermaid diagrams
window.addEventListener(
  'load',
  function() {
    let nodes = document.querySelectorAll('.mermaid');
    for (let i = 0; i < nodes.length; i++) {
      const element = nodes[i];
      const svg = element.firstChild;
      svg.removeAttribute('height');
    }
  },
  false
);</script>
    <script src="https://kit.fontawesome.com/c75a35380d.js"></script>
    </body>
</html>